import{r,W as N,j as e,Y as k}from"./app-JctyaatL.js";import{I as w}from"./InputError-CK0fWoXt.js";import{I as m}from"./InputLabel-CHxpz2Wd.js";import"./SelectInput-C0j6sM9X.js";import{T as h}from"./TextInput-xsOVZClB.js";import{A as C}from"./AuthenticatedLayout-DT3kVLma.js";import"./ApplicationLogo-UL5X0txR.js";import"./Dropdown-4RDQ7-1R.js";import"./transition-Bxw8h7tv.js";function R({auth:u,success:a,attendance:s}){const[x,p]=r.useState(null),[g,j]=r.useState(null),[d,l]=r.useState(null),[o,v]=r.useState(""),i=t=>{v(t.target.value),c("type",t.target.value)};r.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{p(t.coords.latitude),j(t.coords.longitude),c({...n,latitude:t.coords.latitude,longitude:t.coords.longitude})},t=>{l(t.message)}):l("Geolocation is not supported by this browser.")},[]);const{data:n,setData:c,post:f,errors:y,reset:A,progress:S}=N({latitude:"",longitude:"",type:""}),b=t=>{t.preventDefault(),f(route("att.store")),n.type=""};return e.jsxs(C,{user:u.user,header:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Mark Attendance"})}),children:[e.jsx(k,{title:"Attendance"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a&&e.jsx("div",{className:"bg-emerald-500 py-2 px-4 text-white rounded mb-4",children:a}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:e.jsxs("form",{action:"",onSubmit:b,className:"p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg flex justify-center",children:[s.length>=1?"":e.jsxs("div",{className:"mt-4 mr-4 flex px-2",children:[e.jsx(m,{htmlFor:"check_in",value:"Check In",className:"mr-2"}),e.jsx(h,{id:"in",type:"radio",checked:o==="in",className:"mt-1 ",value:"in",onChange:i})]}),s.length==2?"":e.jsxs("div",{className:"mt-4 flex  ",children:[e.jsx(m,{htmlFor:"check_in",value:"Check Out",className:"mr-2"}),e.jsx(h,{id:"out",type:"radio",checked:o==="out",className:"mt-1 px-2",value:"out",onChange:i})]}),e.jsx(w,{message:y.type,className:"mt-2"}),s.length==2?e.jsx("h1",{className:"font-bold",children:"You have Submitted Today Attendance"}):e.jsx("div",{children:e.jsx("button",{className:"ml-3 bg-emerald-500 py-1 px-3 text-white rounded shadow transition-all hover:bg-emerald-600",children:"Mark Attendance"})})]})})})]})}),e.jsx("div",{children:s.length>0?e.jsxs("div",{children:[e.jsx("h3",{children:"Today Attendance Record"}),e.jsx("div",{children:s.map((t,E)=>e.jsxs("p",{className:"font-bold",children:["You Have checked ",t.type," at ",t.time]}))})]}):e.jsx("p",{className:"font-bold ",children:"You Have't checked in or Checked Out today"})}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("h3",{children:"Current Location"}),d?e.jsxs("p",{children:["Error: ",d]}):e.jsxs("div",{children:[e.jsxs("p",{children:["Latitude: ",x]}),e.jsxs("p",{children:["Longitude: ",g]})]})]})]})}export{R as default};
